# Nginx configuration to proxy to gunicorn unix socket and serve static files
# Listen on 190.96.102.30:8081 as requested
server {
    listen 190.96.102.30:8081;
    server_name 190.96.102.30; # Bind to the requested IP

    # Increase client body size if you upload files
    client_max_body_size 50M;

    access_log /var/log/nginx/controlbovino.access.log;
    error_log /var/log/nginx/controlbovino.error.log;

    location = /favicon.ico { access_log off; log_not_found off; }

    # Static files
    location /static/ {
        alias /home/administrador/ControlBovinoVFinal/staticfiles/;
    }

    # Media files
    location /media/ {
        alias /home/administrador/ControlBovinoVFinal/media/;
    }

    # Proxy pass to gunicorn socket
    location / {
        include proxy_params;
        proxy_redirect off;
        proxy_pass http://unix:/run/gunicorn-controlbovino/gunicorn-controlbovino.sock;
    }
}
